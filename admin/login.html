<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin login — My Innercircle</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../styles.css" />
  <style>
    .login-page { max-width: 360px; margin: 4rem auto; padding: 2rem; }
    .login-page h1 { font-size: 1.5rem; margin-bottom: 1.5rem; }
    .login-form label { display: block; margin-bottom: 0.35rem; font-weight: 500; }
    .login-form input { width: 100%; padding: 0.65rem; margin-bottom: 1rem; border: 1px solid var(--border); border-radius: 8px; }
    .login-form .btn { width: 100%; margin-top: 0.5rem; }
    .login-error { color: #c53030; font-size: 0.9rem; margin-bottom: 1rem; display: none; }
    .login-error.visible { display: block; }
    .back-link { display: inline-block; margin-top: 1rem; font-size: 0.9rem; color: var(--text-muted); }
  </style>
</head>
<body>
  <main class="login-page">
    <h1>My Innercircle — Admin</h1>
    <p id="login-error" class="login-error"></p>
    <form id="login-form" class="login-form">
      <label for="email">Email</label>
      <input type="email" id="email" required autocomplete="email" />
      <label for="password">Password</label>
      <input type="password" id="password" required autocomplete="current-password" />
      <button type="submit" class="btn btn-primary">Log in</button>
    </form>
    <a href="../index.html" class="back-link">← Back to site</a>
  </main>

  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
  <script src="../firebase-config.js"></script>
  <script>
    if (typeof FIREBASE_CONFIG === "undefined" || !FIREBASE_CONFIG.apiKey || FIREBASE_CONFIG.apiKey === "YOUR_API_KEY") {
      document.body.innerHTML = "<main class='login-page'><h1>Firebase not configured</h1><p>Edit <code>firebase-config.js</code> in the project root and add your Firebase project config.</p><a href='../index.html' class='back-link'>← Back to site</a></main>";
    } else {
      firebase.initializeApp(FIREBASE_CONFIG);
      var auth = firebase.auth();

      auth.onAuthStateChanged(function(user) {
        if (user) {
          window.location.href = "dashboard.html";
        }
      });

      document.getElementById("login-form").addEventListener("submit", function(e) {
        e.preventDefault();
        var email = document.getElementById("email").value.trim();
        var password = document.getElementById("password").value;
        var errEl = document.getElementById("login-error");
        errEl.textContent = "";
        errEl.classList.remove("visible");
        auth.signInWithEmailAndPassword(email, password)
          .then(function() {
            window.location.href = "dashboard.html";
          })
          .catch(function(err) {
            errEl.textContent = err.message || "Login failed.";
            errEl.classList.add("visible");
          });
      });
    }
  </script>
</body>
</html>
